
<!DOCTYPE html>
<html lang="zh-CN">


<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#202020"/>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
  
  
    <meta name="keywords" content="原创,hexo,常用命令," />
  

  
    <meta name="description" content="小天的小窝，记录学习笔记和走过的点点滴滴！" />
  
  
  <link rel="icon" type="image/x-icon" href="/logo.png">
  <title>Hexo静态博客 [ 小天的小窝 ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css">
    
      <link rel="stylesheet" href="/css/xoxo.css">
    
  
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="小天的小窝" type="application/atom+xml">
</head>


<body>
  <div class="nav-container">
    <nav class="home-menu pure-menu pure-menu-horizontal">
  <a class="pure-menu-heading" href="/">
    <img class="avatar" src="/static/avatar/avatar.png">
    <span class="title">小天的小窝</span>
  </a>

  <ul class="pure-menu-list clearfix">
      
          
            <li class="pure-menu-item"><a href="/" class="pure-menu-link">首页</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/archives" class="pure-menu-link">归档</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/tags" class="pure-menu-link">标签</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/search" class="pure-menu-link">搜索</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/about" class="pure-menu-link">关于</a></li>
          
      
          
            <li class="pure-menu-item"><a href="/atom.xml" class="pure-menu-link">订阅</a></li>
          
      
  </ul>
   
</nav>
  </div>

  <div class="container" id="content-outer">
    <div class="inner" id="content-inner">
      <div class="post-container">
  <article class="post" id="post">
    <header class="post-header text-center">
      <h1 class="title">
        Hexo静态博客
      </h1>
      <span>
        
        <time class="time" datetime="2016-10-01T05:31:12.000Z">
        2016-10-01
      </time>
        
      </span>
      <span class="slash">/</span>
      <span class="post-meta">
      <span class="post-tags">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" rel="tag">常用命令</a></li></ul>
      </span>
    </span>
      <span class="slash">/</span>
      <span class="read">
      <span id="busuanzi_value_page_pv"></span> 点击
    </span>
      <span class="slash">/</span>
      <span class="read">阅读耗时 48 分钟</span>
    </header>

    <div class="post-content">
      <h1 id="Hexo静态博客"><a href="#Hexo静态博客" class="headerlink" title="Hexo静态博客"></a>Hexo静态博客</h1><p>该笔记为本博客的创建过程的笔记，记录在这里方便后面查看，也可以给才使用Hexo的侠门一点参考吧！</p>
<h2 id="一、环境配置"><a href="#一、环境配置" class="headerlink" title="一、环境配置"></a>一、环境配置</h2><h3 id="1-1-git配置"><a href="#1-1-git配置" class="headerlink" title="1.1.git配置"></a>1.1.git配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# yum -y install git</span><br></pre></td></tr></table></figure>

<h3 id="1-2-Node-js安装"><a href="#1-2-Node-js安装" class="headerlink" title="1.2.Node.js安装"></a>1.2.Node.js安装</h3><p>安装node.js依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum -y install gcc gcc-c++ openssl-devel</span><br></pre></td></tr></table></figure>

<p>下载软件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost soft]# wget https://nodejs.org/dist/v4.6.0/node-v4.6.0.tar.gz</span><br></pre></td></tr></table></figure>

<p>解压、配置、编译、安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost soft]# tar -zxf node-v4.6.0.tar.gz</span><br><span class="line">[root@localhost node-v4.6.0]# ./configure --prefix=/usr/local/nodejs460</span><br><span class="line">// make过程用了20分钟</span><br><span class="line">[root@localhost node-v4.6.0]# make</span><br><span class="line">[root@localhost node-v4.6.0]# make install</span><br></pre></td></tr></table></figure>

<p>配置Node环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost node-v4.6.0]# vim /etc/profile</span><br><span class="line">export NODE_HOME=/usr/local/nodejs460</span><br><span class="line">PATH=/usr/local/mysql/bin:/usr/local/mysql/lib:/usr/local/php/bin:$NODE_HOME/bin:$PATH</span><br></pre></td></tr></table></figure>

<p>检查安装是否成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost node-v4.6.0]# node -v</span><br><span class="line">v4.6.0</span><br><span class="line">[root@localhost node-v4.6.0]# npm -v</span><br><span class="line">2.15.9</span><br></pre></td></tr></table></figure>

<h2 id="二、安装Hexo"><a href="#二、安装Hexo" class="headerlink" title="二、安装Hexo"></a>二、安装Hexo</h2><h3 id="2-1-安装Hexo"><a href="#2-1-安装Hexo" class="headerlink" title="2.1.安装Hexo"></a>2.1.安装Hexo</h3><p>安装Hexo，要用全局安装，加-g参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# npm -g install hexo</span><br></pre></td></tr></table></figure>

<p>查看版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# hexo version</span><br><span class="line">hexo-cli: 1.0.2</span><br><span class="line">os: Linux 3.10.0-327.28.3.el7.x86_64 linux x64</span><br><span class="line">http_parser: 2.7.0</span><br><span class="line">node: 4.6.0</span><br><span class="line">v8: 4.5.103.37</span><br><span class="line">uv: 1.9.1</span><br><span class="line">zlib: 1.2.8</span><br><span class="line">ares: 1.10.1-DEV</span><br><span class="line">modules: 46</span><br><span class="line">openssl: 1.0.2j</span><br><span class="line">[root@localhost lai]# </span><br></pre></td></tr></table></figure>

<p>查看命令帮助</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# hexo help</span><br><span class="line">Usage: hexo &lt;command&gt;</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  help     Get help on a command.</span><br><span class="line">  init     Create a new Hexo folder.</span><br><span class="line">  version  Display version information.</span><br><span class="line"></span><br><span class="line">Global Options:</span><br><span class="line">  --config  Specify config file instead of using _config.yml</span><br><span class="line">  --cwd     Specify the CWD</span><br><span class="line">  --debug   Display all verbose messages in the terminal</span><br><span class="line">  --draft   Display draft posts</span><br><span class="line">  --safe    Disable all plugins and scripts</span><br><span class="line">  --silent  Hide output on console</span><br><span class="line"></span><br><span class="line">For more help, you can use &#x27;hexo help [command]&#x27; for the detailed information</span><br><span class="line">or you can check the docs: http://hexo.io/docs/</span><br></pre></td></tr></table></figure>
<p>帮助信息了解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1、help： 查看帮助信息</span><br><span class="line">2、init [文件夹名]： 创建一个hexo项目，不指定文件夹名，则在当前目录创建</span><br><span class="line">3、version： 查看hexo的版本</span><br><span class="line">4、--config config-path：指定配置文件，代替默认的_config.yml</span><br><span class="line">5、--cwd cwd-path：自定义当前工作目录</span><br><span class="line">5、--debug：调试模式，输出所有日志信息</span><br><span class="line">6、--safe：安全模式，禁用所有的插件和脚本</span><br><span class="line">7、--silent：无日志输出模式</span><br></pre></td></tr></table></figure>

<h3 id="2-2-创建项目"><a href="#2-2-创建项目" class="headerlink" title="2.2.创建项目"></a>2.2.创建项目</h3><p>下面就可以来创建项目了，使用init命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost html]# hexo init lai</span><br><span class="line">INFO  Cloning hexo-starter to /var/www/html/lai</span><br><span class="line">WARN  git clone failed. Copying data instead</span><br><span class="line">INFO  Install dependencies</span><br><span class="line">npm WARN deprecated swig@1.4.2: This package is no longer maintained</span><br><span class="line">npm WARN optional dep failed, continuing fsevents@1.0.14</span><br><span class="line">npm WARN optional dep failed, continuing fsevents@1.0.14</span><br><span class="line"> </span><br><span class="line">&gt; dtrace-provider@0.6.0 install /var/www/html/lai/node_modules/hexo/node_modules/hexo-log/node_modules/bunyan/node_modules/dtrace-provider</span><br><span class="line">&gt; node scripts/install.js</span><br><span class="line"></span><br><span class="line">npm WARN deprecated minimatch@0.3.0: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue</span><br><span class="line"> </span><br><span class="line">&gt; hexo-util@0.6.0 postinstall /var/www/html/lai/node_modules/hexo-renderer-marked/node_modules/hexo-util</span><br><span class="line">&gt; npm run build:highlight</span><br><span class="line"></span><br><span class="line">|</span><br><span class="line">&gt; hexo-util@0.6.0 build:highlight /var/www/html/lai/node_modules/hexo-renderer-marked/node_modules/hexo-util</span><br><span class="line">&gt; node scripts/build_highlight_alias.js &gt; highlight_alias.json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; hexo-util@0.6.0 postinstall /var/www/html/lai/node_modules/hexo/node_modules/hexo-util</span><br><span class="line">&gt; npm run build:highlight</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; hexo-util@0.6.0 build:highlight /var/www/html/lai/node_modules/hexo/node_modules/hexo-util</span><br><span class="line">&gt; node scripts/build_highlight_alias.js &gt; highlight_alias.json</span><br><span class="line"></span><br><span class="line">hexo-generator-category@0.1.3 node_modules/hexo-generator-category</span><br><span class="line">├── object-assign@2.1.1</span><br><span class="line">└── hexo-pagination@0.0.2 (utils-merge@1.0.0)</span><br><span class="line"></span><br><span class="line">hexo-generator-tag@0.2.0 node_modules/hexo-generator-tag</span><br><span class="line">├── object-assign@4.1.0</span><br><span class="line">└── hexo-pagination@0.0.2 (utils-merge@1.0.0)</span><br><span class="line"></span><br><span class="line">hexo-generator-archive@0.1.4 node_modules/hexo-generator-archive</span><br><span class="line">├── object-assign@2.1.1</span><br><span class="line">└── hexo-pagination@0.0.2 (utils-merge@1.0.0)</span><br><span class="line"></span><br><span class="line">hexo-generator-index@0.2.0 node_modules/hexo-generator-index</span><br><span class="line">├── object-assign@4.1.0</span><br><span class="line">└── hexo-pagination@0.0.2 (utils-merge@1.0.0)</span><br><span class="line"></span><br><span class="line">hexo-renderer-ejs@0.2.0 node_modules/hexo-renderer-ejs</span><br><span class="line">├── object-assign@4.1.0</span><br><span class="line">└── ejs@1.0.0</span><br><span class="line"></span><br><span class="line">hexo-server@0.2.0 node_modules/hexo-server</span><br><span class="line">├── object-assign@4.1.0</span><br><span class="line">├── mime@1.3.4</span><br><span class="line">├── bluebird@3.4.6</span><br><span class="line">├── chalk@1.1.3 (escape-string-regexp@1.0.5, supports-color@2.0.0, ansi-styles@2.2.1, has-ansi@2.0.0, strip-ansi@3.0.1)</span><br><span class="line">├── opn@4.0.2 (pinkie-promise@2.0.1)</span><br><span class="line">├── morgan@1.7.0 (on-headers@1.0.1, basic-auth@1.0.4, depd@1.1.0, on-finished@2.3.0, debug@2.2.0)</span><br><span class="line">├── connect@3.5.0 (utils-merge@1.0.0, parseurl@1.3.1, debug@2.2.0, finalhandler@0.5.0)</span><br><span class="line">├── serve-static@1.11.1 (escape-html@1.0.3, encodeurl@1.0.1, parseurl@1.3.1, send@0.14.1)</span><br><span class="line">└── compression@1.6.2 (on-headers@1.0.1, vary@1.1.0, bytes@2.3.0, debug@2.2.0, compressible@2.0.8, accepts@1.3.3)</span><br><span class="line"></span><br><span class="line">hexo-renderer-stylus@0.3.1 node_modules/hexo-renderer-stylus</span><br><span class="line">├── stylus@0.53.0 (css-parse@1.7.0, debug@2.2.0, mkdirp@0.5.1, source-map@0.1.43, sax@0.5.8, glob@3.2.11)</span><br><span class="line">└── nib@1.1.2 (stylus@0.54.5)</span><br><span class="line"></span><br><span class="line">hexo-renderer-marked@0.2.11 node_modules/hexo-renderer-marked</span><br><span class="line">├── object-assign@4.1.0</span><br><span class="line">├── marked@0.3.6</span><br><span class="line">├── strip-indent@1.0.1 (get-stdin@4.0.1)</span><br><span class="line">└── hexo-util@0.6.0 (striptags@2.1.1, html-entities@1.2.0, camel-case@3.0.0, bluebird@3.4.6, cross-spawn@4.0.2, highlight.js@9.7.0)</span><br><span class="line"></span><br><span class="line">hexo@3.2.2 node_modules/hexo</span><br><span class="line">├── abbrev@1.0.9</span><br><span class="line">├── pretty-hrtime@1.0.2</span><br><span class="line">├── hexo-front-matter@0.2.3</span><br><span class="line">├── archy@1.0.0</span><br><span class="line">├── titlecase@1.1.2</span><br><span class="line">├── text-table@0.2.0</span><br><span class="line">├── strip-indent@1.0.1 (get-stdin@4.0.1)</span><br><span class="line">├── tildify@1.2.0 (os-homedir@1.0.2)</span><br><span class="line">├── chalk@1.1.3 (escape-string-regexp@1.0.5, ansi-styles@2.2.1, supports-color@2.0.0, has-ansi@2.0.0, strip-ansi@3.0.1)</span><br><span class="line">├── hexo-i18n@0.2.1 (sprintf-js@1.0.3)</span><br><span class="line">├── minimatch@3.0.3 (brace-expansion@1.1.6)</span><br><span class="line">├── bluebird@3.4.6</span><br><span class="line">├── moment-timezone@0.5.5</span><br><span class="line">├── swig-extras@0.0.1 (markdown@0.5.0)</span><br><span class="line">├── js-yaml@3.6.1 (esprima@2.7.3, argparse@1.0.9)</span><br><span class="line">├── hexo-cli@1.0.2 (object-assign@4.1.0, minimist@1.2.0)</span><br><span class="line">├── swig@1.4.2 (optimist@0.6.1, uglify-js@2.4.24)</span><br><span class="line">├── hexo-log@0.1.2 (bunyan@1.8.1)</span><br><span class="line">├── nunjucks@2.5.2 (asap@2.0.5, yargs@3.32.0, chokidar@1.6.0)</span><br><span class="line">├── hexo-fs@0.1.6 (escape-string-regexp@1.0.5, graceful-fs@4.1.9, chokidar@1.6.0)</span><br><span class="line">├── moment@2.13.0</span><br><span class="line">├── cheerio@0.20.0 (entities@1.1.1, dom-serializer@0.1.0, css-select@1.2.0, htmlparser2@3.8.3, jsdom@7.2.2)</span><br><span class="line">├── lodash@4.16.4</span><br><span class="line">├── warehouse@2.2.0 (graceful-fs@4.1.9, is-plain-object@2.0.1, JSONStream@1.2.1, cuid@1.3.8)</span><br><span class="line">└── hexo-util@0.6.0 (striptags@2.1.1, html-entities@1.2.0, camel-case@3.0.0, cross-spawn@4.0.2, highlight.js@9.7.0)</span><br><span class="line">INFO  Start blogging with Hexo!</span><br></pre></td></tr></table></figure>

<p>接着需要安装依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost html]# cd lai/</span><br><span class="line">[root@localhost lai]# npm install</span><br></pre></td></tr></table></figure>

<p>启动Hexo服务器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# hexo server</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>

<p>指定端口启动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# hexo server -p 80</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:80/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>

<h3 id="2-3-Hexo的配置介绍"><a href="#2-3-Hexo的配置介绍" class="headerlink" title="2.3.Hexo的配置介绍"></a>2.3.Hexo的配置介绍</h3><h3 id="2-3-1-项目结构图"><a href="#2-3-1-项目结构图" class="headerlink" title="2.3.1.项目结构图"></a>2.3.1.项目结构图</h3><p>项目结构图如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# tree -L 3</span><br><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── db.json</span><br><span class="line">├── node_modules</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">│   ├── draft.md</span><br><span class="line">│   ├── page.md</span><br><span class="line">│   └── post.md</span><br><span class="line">├── source</span><br><span class="line">│   └── _posts</span><br><span class="line">│       └── hello-world.md</span><br><span class="line">└── themes</span><br><span class="line">    └── landscape</span><br><span class="line">        ├── _config.yml</span><br><span class="line">        ├── Gruntfile.js</span><br><span class="line">        ├── languages</span><br><span class="line">        ├── layout</span><br><span class="line">        ├── LICENSE</span><br><span class="line">        ├── package.json</span><br><span class="line">        ├── README.md</span><br><span class="line">        ├── scripts</span><br><span class="line">        └── source</span><br></pre></td></tr></table></figure>

<p>1、scaffolds：模板文件夹，新建文章时，Hexo 会根据 scaffold 来建立文件。Hexo 有三种默认布局：post、page 和 draft，它们分别对应不同的路径。新建文件的默认布局是post，可以在配置文件中更改布局。用draft布局生成的文件会被保存到 source&#x2F;_drafts 文件夹。</p>
<p>2、source：资源文件夹是存放用户资源的地方。</p>
<p>3、source&#x2F;_post：文件箱。（低版本的hexo还会存在一个_draft，这是草稿箱）除 posts 文件夹之外，开头命名为 (下划线)的文件&#x2F; 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去</p>
<p>4、themes：主题 文件夹。Hexo 会根据主题来生成静态页面。</p>
<p>5、themes&#x2F;landscape：默认的皮肤文件夹</p>
<p>6、_config.yml：全局的配置文件，每次更改要重启服务。</p>
<p>低版本的Hexo还会生成scripts文件夹，里面用于保存扩展Hexo的脚本文件。</p>
<h3 id="2-3-2-全局配置"><a href="#2-3-2-全局配置" class="headerlink" title="2.3.2.全局配置"></a>2.3.2.全局配置</h3><p>可以在_config.yml 中修改：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"># Hexo Configuration</span><br><span class="line">## Docs: http://hexo.io/docs/configuration.html</span><br><span class="line">## Source: https://github.com/hexojs/hexo/</span><br><span class="line"></span><br><span class="line"># Site 站点配置</span><br><span class="line">title: Hexo-demo  #网站标题</span><br><span class="line">subtitle: hexo is simple and easy to study   #网站副标题</span><br><span class="line">description: this is hexo-demo #网栈描述</span><br><span class="line">author: pomy #你的名字</span><br><span class="line">language:  zh-CN #网站使用的语言</span><br><span class="line">timezone: Asia/Shanghai  #网站时区</span><br><span class="line"></span><br><span class="line"># URL #可以不用配置</span><br><span class="line">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span><br><span class="line">url: http://yoursite.com #网址，搜索时会在搜索引擎中显示</span><br><span class="line">root: /  #网站根目录</span><br><span class="line">permalink: :year/:month/:day/:title/ #永久链接格式</span><br><span class="line">permalink_defaults: #永久链接中各部分的默认值</span><br><span class="line"></span><br><span class="line"># Directory 目录配置</span><br><span class="line">source_dir: source #资源文件夹，这个文件夹用来存放内容</span><br><span class="line">public_dir: public #公共文件夹，这个文件夹用于存放生成的站点文件</span><br><span class="line">tag_dir: tags #标签文件夹</span><br><span class="line">archive_dir: archives #归档文件夹</span><br><span class="line">category_dir: categories #分类文件夹</span><br><span class="line">code_dir: downloads/code #Include code 文件夹</span><br><span class="line">i18n_dir: :lang   #国际化文件夹</span><br><span class="line">skip_render:      #跳过指定文件的渲染，您可使用 glob 来配置路径</span><br><span class="line"></span><br><span class="line"># Writing 写作配置</span><br><span class="line">new_post_name: :title.md # 新文章的文件名称</span><br><span class="line">default_layout: post   #默认布局</span><br><span class="line">titlecase: false # Transform title into titlecase</span><br><span class="line">external_link: true # Open external links in new tab 在新标签中打开一个外部链接，默认为true</span><br><span class="line">filename_case: 0 #把文件名称转换为 (1) 小写或 (2) 大写，默认为0，意思就是创建文章的时候，是否自动帮你转换文件名，默认就行，意义不大。</span><br><span class="line">render_drafts: false #显示草稿，是否渲染_drafts目录下的文章，默认为false</span><br><span class="line">post_asset_folder: false #是否启动资源文件夹|启动 Asset 文件夹</span><br><span class="line">relative_link: false #把链接改为与根目录的相对位址</span><br><span class="line">future: true  #显示未来的文章，默认false</span><br><span class="line">highlight:  #代码块的设置</span><br><span class="line">  enable: true</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: true</span><br><span class="line">  tab_replace:</span><br><span class="line"></span><br><span class="line"># Category &amp; Tag 分类 &amp; 标签</span><br><span class="line">default_category: uncategorized #默认分类</span><br><span class="line">category_map:   #分类别名   </span><br><span class="line">tag_map:        #标签别名</span><br><span class="line"></span><br><span class="line"># Date / Time format  时间和日期</span><br><span class="line">## Hexo uses Moment.js to parse and display date</span><br><span class="line">## You can customize the date format as defined in</span><br><span class="line">## http://momentjs.com/docs/#/displaying/format/</span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line"></span><br><span class="line"># Pagination 分页</span><br><span class="line">## Set per_page to 0 to disable pagination</span><br><span class="line">per_page: 10 #每页显示的文章量 (0 = 关闭分页功能)</span><br><span class="line">pagination_dir: page #分页目录</span><br><span class="line"></span><br><span class="line"># Extensions 扩展</span><br><span class="line">## Plugins: http://hexo.io/plugins/ 插件</span><br><span class="line">## Themes: http://hexo.io/themes/  主题</span><br><span class="line">theme: landscape #当前主题名称</span><br><span class="line"></span><br><span class="line"># Deployment #部署到github</span><br><span class="line">## Docs: http://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type:</span><br></pre></td></tr></table></figure>

<p>修改全局配置时，注意缩进，同时注意冒号后面要有一个空格。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# vim _config.yml </span><br><span class="line"></span><br><span class="line"># Hexo Configuration</span><br><span class="line">## Docs: https://hexo.io/docs/configuration.html</span><br><span class="line">## Source: https://github.com/hexojs/hexo/</span><br><span class="line"></span><br><span class="line"># Site</span><br><span class="line">title: 小天的小窝 </span><br><span class="line">subtitle: 有空了就种点菜，年底就会大丰收</span><br><span class="line">description: 小天的小窝，记录学习笔记，记录点点滴滴！</span><br><span class="line">author: Lai</span><br><span class="line">language: zh-Hans</span><br><span class="line">timezone: Asia/Shanghai</span><br></pre></td></tr></table></figure>

<p>分页配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Pagination</span><br><span class="line">## Set per_page to 0 to disable pagination</span><br><span class="line">per_page: 5</span><br><span class="line">pagination_dir: page</span><br></pre></td></tr></table></figure>

<h3 id="2-3-3-主题配置"><a href="#2-3-3-主题配置" class="headerlink" title="2.3.3.主题配置"></a>2.3.3.主题配置</h3><p>主题的配置文件在&#x2F;themes&#x2F;主题文件夹&#x2F;_config.yml，一般包括导航配置(menu)，内容配置(content)，评论插件，图片效果(fancybox)和边栏(sidebar)。</p>
<p>Hexo提共了大量的主题，可以在全局配置文件中更改主题：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Extensions 扩展</span><br><span class="line">## Plugins: http://hexo.io/plugins/ 插件</span><br><span class="line">## Themes: http://hexo.io/themes/  主题</span><br><span class="line">theme: 你的主题名称</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost landscape]# pwd</span><br><span class="line">/var/www/html/lai/themes/landscape</span><br><span class="line"></span><br><span class="line">menu:	#博客右上角的菜单栏，暂时使用默认值</span><br><span class="line">  首页: /</span><br><span class="line">  归档: /archives</span><br><span class="line">  关于: /about</span><br><span class="line">  </span><br><span class="line">#该类对应于E:\hexo\themes\light\layout\_widget下的文件</span><br><span class="line">widgets:	#站点右边栏，可以参照我的博客看，暂时使用默认值</span><br><span class="line">- intro		#简介</span><br><span class="line">- search		#搜索</span><br><span class="line">- category	#分类</span><br><span class="line">- tagcloud	#标签云</span><br><span class="line">- weibo		#微博</span><br><span class="line">- blogroll	#友情链接</span><br><span class="line"></span><br><span class="line">excerpt_link: Read more	#文章下的Read more，可以改为&#x27;阅读全文&#x27;</span><br><span class="line"></span><br><span class="line">plugins:	#插件，暂时使用默认值</span><br><span class="line"></span><br><span class="line">twitter:	#twitter</span><br><span class="line">  username:</span><br><span class="line">  show_replies: false</span><br><span class="line">  tweet_count: 5</span><br><span class="line"></span><br><span class="line">addthis:	#SNS分享，暂时使用默认</span><br><span class="line">  enable: true</span><br><span class="line">  pubid:</span><br><span class="line">  facebook: true</span><br><span class="line">  twitter: true</span><br><span class="line">  google: true</span><br><span class="line">  pinterest: true</span><br><span class="line"></span><br><span class="line">fancybox: true	#图片效果，使用默认值</span><br><span class="line"></span><br><span class="line">google_analytics: </span><br><span class="line">rss: 	#生成RSS，暂时使用默认值</span><br></pre></td></tr></table></figure>

<p>主题的文件目录必须在 themes 目录下。Hexo主题更换教程</p>
<p>更多Hexo主题戳此：<a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/wiki/Themes">Hexo Themes</a>。</p>
<p>第一名：’iissnan&#x2F;hexo-theme-next’, 470星 <a target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next">https://github.com/iissnan/hexo-theme-next</a><br>预览：<a target="_blank" rel="noopener" href="http://notes.iissnan.com/">http://notes.iissnan.com/</a></p>
<p>第二名：<a target="_blank" rel="noopener" href="http://kywk.github.io/hexo-theme-casper/">TryGhost&#x2F;Casper</a>, 439星 or kywk&#x2F;hexo-theme-casper 44星<br>后面一个主题是基于前面一个主题。</p>
<p>第五名：<a href="http://link.zhihu.com/?target=https://github.com/litten/hexo-theme-yilia">litten&#x2F;hexo-theme-yilia</a>, 265星</p>
<h3 id="2-3-4-主题安装"><a href="#2-3-4-主题安装" class="headerlink" title="2.3.4.主题安装"></a>2.3.4.主题安装</h3><p>1.首先从github上面下载yilia主题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# pwd</span><br><span class="line">/var/www/html/lai</span><br><span class="line">[root@localhost lai]# </span><br><span class="line">[root@localhost lai]# git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia</span><br><span class="line">正克隆到 &#x27;themes/yilia&#x27;...</span><br><span class="line">remote: Counting objects: 1243, done.</span><br><span class="line">remote: Compressing objects: 100% (57/57), done.</span><br><span class="line">remote: Total 1243 (delta 24), reused 0 (delta 0), pack-reused 1186</span><br><span class="line">接收对象中: 100% (1243/1243), 8.62 MiB | 289.00 KiB/s, done.</span><br><span class="line">处理 delta 中: 100% (562/562), done.</span><br></pre></td></tr></table></figure>

<p>1.启用 yilia 主题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# vim _config.yml</span><br><span class="line">theme: yilia</span><br></pre></td></tr></table></figure>

<p>3.其它主题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/letiantian/huno.git</span><br><span class="line">https://github.com/dwqs/nx.git</span><br><span class="line">https://github.com/iissnan/hexo-theme-next.git</span><br></pre></td></tr></table></figure>

<h2 id="三、基本使用"><a href="#三、基本使用" class="headerlink" title="三、基本使用"></a>三、基本使用</h2><h3 id="3-1-创建新文章"><a href="#3-1-创建新文章" class="headerlink" title="3.1.创建新文章"></a>3.1.创建新文章</h3><p>使用new命令创建文章，注意，创建文件章时，请在项目的根目录下创建，否则可能导致创建失败。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# hexo new &quot;mysql数据库导入导出&quot;</span><br><span class="line">INFO  Created: /var/www/html/lai/source/_posts/mysql数据库导入导出.md</span><br></pre></td></tr></table></figure>

<p>new命令也可以简写为n，使用hexo n可以看查详情。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# hexo n</span><br><span class="line">Usage: hexo new [layout] &lt;title&gt;</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line">Create a new post.</span><br><span class="line"></span><br><span class="line">Arguments:</span><br><span class="line">  layout  Post layout. Use post, page, draft or whatever you want.</span><br><span class="line">  title   Post title. Wrap it with quotations to escape.</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -p, --path     Post path. Customize the path of the post.</span><br><span class="line">  -r, --replace  Replace the current post if existed.</span><br><span class="line">  -s, --slug     Post slug. Customize the URL of the post.</span><br></pre></td></tr></table></figure>


<p>如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。如果标题包含空格的话，需用引号括起来。</p>
<p>Hexo提供的layout在scaffolds目录下，也可以在此目录下自建layout文件。新建的文件则会保存到source&#x2F;_post目录下。</p>
<h3 id="3-2-编辑新文章"><a href="#3-2-编辑新文章" class="headerlink" title="3.2.编辑新文章"></a>3.2.编辑新文章</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost _posts]# pwd</span><br><span class="line">/var/www/html/lai/source/_posts</span><br><span class="line">[root@localhost _posts]# vim mysql数据库导入导出.md </span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: mysql数据库导入导出</span><br><span class="line">date: 2016-10-08 14:39:04</span><br><span class="line">tags: [mysql,导入导出] #文章标签，多于一项时用这种格式，只有一项时使用tags: blog</span><br><span class="line">categories: MySql</span><br><span class="line">description: 我是一个MySql数据库导入导出的笔记</span><br><span class="line">---</span><br><span class="line">## 数据库导入导出</span><br><span class="line"></span><br><span class="line">1.导出数据库</span><br><span class="line"></span><br><span class="line">&gt; mysqldump -u root -p 数据库名&gt;文件名.sql</span><br><span class="line"></span><br><span class="line">&lt;!--more--&gt;</span><br><span class="line"></span><br><span class="line">2.导入数据库</span><br><span class="line"></span><br><span class="line">&gt; mysql -u root -p;use 数据库名;source 文件名.sql;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-小技巧"><a href="#3-3-小技巧" class="headerlink" title="3.3.小技巧"></a>3.3.小技巧</h3><blockquote>
<p>摘要显示</p>
</blockquote>
<p>发表的文章会全部显示，如果文章很长，就只要显示文章的摘要就行了。在需要显示摘要的地方添加如下代码即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">以上是摘要</span><br><span class="line">&lt;!--more--&gt;</span><br><span class="line">以下是余下全文</span><br></pre></td></tr></table></figure>

<p>刷新，就能够看到只显示摘要了，同时会提供Read More的链接。</p>
<p>这个文字可以更改，在主题的配置文件(themes&#x2F;主题文件夹&#x2F;_config.yml)中，找到Content：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Content</span><br><span class="line">excerpt_link: Read More  #可以更改成想要显示的文字</span><br><span class="line">fancybox: true</span><br></pre></td></tr></table></figure>

<blockquote>
<p>修改文章的参数</p>
</blockquote>
<p>打开scaffolds&#x2F;post.md，增加类别和描述，tags和categories有多个，则用数组形式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">description:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h3 id="3-4-部署"><a href="#3-4-部署" class="headerlink" title="3.4.部署"></a>3.4.部署</h3><p>在部署之前，需要通过命令把所有的文章都做静态化处理，就是生成对应的html, javascript, css，使得所有的文章都是由静态文件组成的：</p>
<p>生成静态命令：hexo generate(或hexo g)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# hexo g</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Files loaded in 378 ms</span><br><span class="line">INFO  Generated: index.html</span><br><span class="line">INFO  Generated: archives/index.html</span><br><span class="line">INFO  Generated: fancybox/blank.gif</span><br><span class="line">INFO  Generated: fancybox/jquery.fancybox.css</span><br><span class="line">INFO  Generated: fancybox/jquery.fancybox.js</span><br><span class="line">INFO  Generated: fancybox/jquery.fancybox.pack.js</span><br><span class="line">INFO  Generated: fancybox/fancybox_loading.gif</span><br><span class="line">INFO  Generated: fancybox/fancybox_loading@2x.gif</span><br><span class="line">INFO  Generated: fancybox/fancybox_overlay.png</span><br><span class="line">INFO  Generated: fancybox/fancybox_sprite.png</span><br><span class="line">INFO  Generated: fancybox/fancybox_sprite@2x.png</span><br><span class="line">INFO  Generated: archives/2016/10/index.html</span><br><span class="line">INFO  Generated: tags/mysql/index.html</span><br><span class="line">INFO  Generated: tags/导入导出/index.html</span><br><span class="line">INFO  Generated: archives/2016/index.html</span><br><span class="line">INFO  Generated: js/script.js</span><br><span class="line">INFO  Generated: fancybox/helpers/jquery.fancybox-buttons.css</span><br><span class="line">INFO  Generated: fancybox/helpers/jquery.fancybox-buttons.js</span><br><span class="line">INFO  Generated: fancybox/helpers/jquery.fancybox-media.js</span><br><span class="line">INFO  Generated: fancybox/helpers/jquery.fancybox-thumbs.css</span><br><span class="line">INFO  Generated: fancybox/helpers/jquery.fancybox-thumbs.js</span><br><span class="line">INFO  Generated: css/style.css</span><br><span class="line">INFO  Generated: categories/MySql/index.html</span><br><span class="line">INFO  Generated: css/fonts/FontAwesome.otf</span><br><span class="line">INFO  Generated: fancybox/helpers/fancybox_buttons.png</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.eot</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.ttf</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.woff</span><br><span class="line">INFO  Generated: css/images/banner.jpg</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.svg</span><br><span class="line">INFO  Generated: 2016/10/08/mysql数据库导入导出/index.html</span><br><span class="line">INFO  Generated: 2016/10/08/hello-world/index.html</span><br><span class="line">INFO  32 files generated in 1.53 s</span><br></pre></td></tr></table></figure>

<p>在本地目录下，会生成一个public的目录，里面包括了所有静态化的文件。</p>
<p>生成静态文件之后，如果要发布到github，还需要配置deploy指令。在全局的配置文件中找到deploy：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: http://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/dwqs/dwqs.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>然后还要安装hexo-deployer-git：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git -S</span><br></pre></td></tr></table></figure>
<p>最后利用hexo指令发布到github：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy(或hexo d)</span><br></pre></td></tr></table></figure>
<p>在github上便能看到刚刚部署的静态web网站：</p>
<p>如果部署的是个人页，新建的仓库必须的 your-user-name.github.io</p>
<h3 id="3-5-另一种部署到gighub的配置"><a href="#3-5-另一种部署到gighub的配置" class="headerlink" title="3.5.另一种部署到gighub的配置"></a>3.5.另一种部署到gighub的配置</h3><p>配置代码如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy: </span><br><span class="line">  type: git</span><br><span class="line">  repository: git@github.com:laybne/layne.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<p>这种配置方式，需要配置SSH key，教程如下：<br>鼠标右键任意地方，选择Git Bash，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;your_email@youremail.com&quot;</span><br></pre></td></tr></table></figure>
<p>后面的<a href="mailto:&#x79;&#x6f;&#x75;&#x72;&#95;&#x65;&#109;&#x61;&#x69;&#x6c;&#x40;&#x79;&#111;&#x75;&#114;&#x65;&#x6d;&#x61;&#105;&#108;&#46;&#x63;&#111;&#x6d;">&#x79;&#x6f;&#x75;&#x72;&#95;&#x65;&#109;&#x61;&#x69;&#x6c;&#x40;&#x79;&#111;&#x75;&#114;&#x65;&#x6d;&#x61;&#105;&#108;&#46;&#x63;&#111;&#x6d;</a>改为你的邮箱，之后会要求确认路径和输入密码，我们这使用默认的一路回车就行。成功的话会在C:\Users\Administrator下生成.ssh文件夹，进入该文件夹，打开id_rsa.pub，复制里面的key。<br>回到github，进入Settings，选择SSH and GPG Keys -&gt; New SSH Key，title随便填，粘贴key。为了验证是否成功，在git bash下输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br></pre></td></tr></table></figure>

<p>如果是第一次的会提示是否continue，输入yes就会看到：You’ve successfully authenticated， but GitHub does not provide shell access ，这就表示已成功连上github。<br>接下来我们要做的就是把本地仓库传到github上去，在此之前还需要设置username和email，因为github每次commit都会记录他们。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;your name&quot;  </span><br><span class="line">$ git config --global user.email &quot;your_email@youremail.com&quot;</span><br></pre></td></tr></table></figure>

<h3 id="3-6-腾讯公益404页面"><a href="#3-6-腾讯公益404页面" class="headerlink" title="3.6.腾讯公益404页面"></a>3.6.腾讯公益404页面</h3><p>在 hexo&#x2F;source 文件夹下新建404.html，推荐使用腾讯公益404。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost source]# vim 404.html </span><br><span class="line"></span><br><span class="line">layout: false</span><br><span class="line">title: &quot;404&quot;</span><br><span class="line">date: 2016-01-01 18:02:30</span><br><span class="line">---</span><br><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8;&quot;/&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;</span><br><span class="line">&lt;meta name=&quot;robots&quot; content=&quot;all&quot; /&gt;</span><br><span class="line">&lt;meta name=&quot;robots&quot; content=&quot;index,follow&quot;/&gt;</span><br><span class="line">&lt;title&gt;公益404页面 // 小天的小窝&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://www.qq.com/404/search_children.js&quot; charset=&quot;utf-8&quot; homePageUrl=&quot;http://xiaming.com.cn&quot; ho</span><br><span class="line">mePageName=&quot;小天的小窝&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-7-yilia主题配置"><a href="#3-7-yilia主题配置" class="headerlink" title="3.7.yilia主题配置"></a>3.7.yilia主题配置</h3><p>配置头像和菜单等。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yilia]# pwd</span><br><span class="line">/var/www/html/lai/themes/yilia</span><br><span class="line">[root@localhost yilia]# vim _config.yml</span><br><span class="line">#你的头像url</span><br><span class="line">avatar: &quot;http://10.60.0.84/avatar.jpg&quot;</span><br><span class="line"></span><br><span class="line">smart_menu:</span><br><span class="line">  innerArchive: &#x27;所有文章&#x27;</span><br><span class="line">  tagcloud: &#x27;标签&#x27;</span><br><span class="line">  friends: &#x27;友链&#x27;</span><br><span class="line">  aboutme: &#x27;关于我&#x27;</span><br><span class="line"></span><br><span class="line">friends:</span><br><span class="line">  友情链接1: http://localhost:4000/</span><br><span class="line">  友情链接2: http://localhost:4000/</span><br></pre></td></tr></table></figure>
<h3 id="3-8-添加tags页面"><a href="#3-8-添加tags页面" class="headerlink" title="3.8.添加tags页面"></a>3.8.添加tags页面</h3><p>1.在项目的source目录下新建一个页面，命名为 tags。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost source]# pwd</span><br><span class="line">/var/www/html/lai/source</span><br><span class="line">[root@localhost source]# ll</span><br><span class="line">总用量 60</span><br><span class="line">-rw-r--r--. 1 root root   555 10月 11 18:03 404.html</span><br><span class="line">drwxr-xr-x. 2 root root    21 10月 10 16:17 about</span><br><span class="line">-rw-r--r--. 1 root root 45477 10月  9 10:47 avatar.jpg</span><br><span class="line">drwxr-xr-x. 2 root root  4096 10月 11 17:21 images</span><br><span class="line">drwxr-xr-x. 2 root root  4096 10月 11 17:43 _posts</span><br><span class="line">[root@localhost source]# hexo new page &quot;tags&quot;</span><br><span class="line">INFO  Created: /var/www/html/lai/source/tags/index.md</span><br><span class="line">[root@localhost source]# ll</span><br><span class="line">总用量 60</span><br><span class="line">-rw-r--r--. 1 root root   555 10月 11 18:03 404.html</span><br><span class="line">drwxr-xr-x. 2 root root    21 10月 10 16:17 about</span><br><span class="line">-rw-r--r--. 1 root root 45477 10月  9 10:47 avatar.jpg</span><br><span class="line">drwxr-xr-x. 2 root root  4096 10月 11 17:21 images</span><br><span class="line">drwxr-xr-x. 2 root root  4096 10月 11 17:43 _posts</span><br><span class="line">drwxr-xr-x. 2 root root    21 10月 11 18:08 tags</span><br></pre></td></tr></table></figure>

<p>2.编辑tags页面内容</p>
<p>在新建的页面中将类型type设置为 tags，主题将自动为这个页面显示标签云。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost source]# cd tags/</span><br><span class="line">[root@localhost tags]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 46 10月 11 18:08 index.md</span><br><span class="line">[root@localhost tags]# vim index.md </span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: Tagcloud</span><br><span class="line">date: 2016-10-11 18:08:26</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>3.编辑next主题，启动用tags</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost next]# vim _config.yml</span><br><span class="line">menu:</span><br><span class="line">  home: /</span><br><span class="line">  #categories: /categories</span><br><span class="line">  about: /about</span><br><span class="line">  archives: /archives</span><br><span class="line">  tags: /tags</span><br></pre></td></tr></table></figure>

<h3 id="3-9-关于我们"><a href="#3-9-关于我们" class="headerlink" title="3.9.关于我们"></a>3.9.关于我们</h3><p>关于我们的创建和tags是一样的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost about]# hexo new page &quot;about&quot;</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: about</span><br><span class="line">date: 2016-10-10 16:10:43</span><br><span class="line">---</span><br><span class="line">Nickname: lai</span><br><span class="line">Email: 386544457@qq.com</span><br><span class="line">Website: www.itcss.cn</span><br></pre></td></tr></table></figure>

<h3 id="3-10-创建分类页面"><a href="#3-10-创建分类页面" class="headerlink" title="3.10.创建分类页面"></a>3.10.创建分类页面</h3><p>1.新建一个名为categories的页面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure>

<p>2.编辑页面内容<br>编辑刚新建的页面，将页面的类型type设置为 categories，主题将自动为这个页面显示所有分类。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title: 分类</span><br><span class="line">date: 2016-10-11 18:21:04</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>3.启用<br>编辑主题所在的_config.yml，将 menu 中的 categories: &#x2F;categories 注释去掉</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: /</span><br><span class="line">  categories: /categories</span><br><span class="line">  archives: /archives</span><br><span class="line">  tags: /tags</span><br></pre></td></tr></table></figure>

<h3 id="3-11-增加本地搜索功能"><a href="#3-11-增加本地搜索功能" class="headerlink" title="3.11.增加本地搜索功能"></a>3.11.增加本地搜索功能</h3><p>1.安装和配置 hexo-generator-search</p>
<p>首先执行命令<code>npm install --save hexo-generator-search</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# ll node_modules/</span><br><span class="line">总用量 36</span><br><span class="line">drwxr-xr-x. 5 root root 4096 10月  9 09:37 hexo</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-generator-archive</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-generator-category</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-generator-index</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-generator-tag</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-renderer-ejs</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-renderer-marked</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-renderer-stylus</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-server</span><br><span class="line">[root@localhost lai]# npm install --save hexo-generator-search</span><br><span class="line">hexo-generator-search@1.0.2 node_modules/hexo-generator-search</span><br><span class="line">├── utils-merge@1.0.0</span><br><span class="line">└── ejs@1.0.0</span><br><span class="line">[root@localhost lai]# ll node_modules/                        </span><br><span class="line">总用量 40</span><br><span class="line">drwxr-xr-x. 5 root root 4096 10月  9 09:37 hexo</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-generator-archive</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-generator-category</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-generator-index</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月 18 14:43 hexo-generator-search</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-generator-tag</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-renderer-ejs</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-renderer-marked</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-renderer-stylus</span><br><span class="line">drwxr-xr-x. 4 root root 4096 10月  9 09:37 hexo-server</span><br><span class="line">[root@localhost lai]# ll node_modules/hexo-generator-search/</span><br><span class="line">总用量 20</span><br><span class="line">-rwxr-xr-x. 1 root root  418 10月  9 2015 index.js</span><br><span class="line">drwxr-xr-x. 2 root root   25 10月  9 2015 lib</span><br><span class="line">-rw-r--r--. 1 root root 1053 10月  9 2015 LICENSE</span><br><span class="line">drwxr-xr-x. 4 root root   34 10月 18 14:43 node_modules</span><br><span class="line">-rw-r--r--. 1 root root 1586 10月 18 14:43 package.json</span><br><span class="line">-rw-r--r--. 1 root root  850 10月  9 2015 README.md</span><br><span class="line">-rw-r--r--. 1 root root  637 10月  9 2015 search.ejs</span><br></pre></td></tr></table></figure>

<p>2.配置搜索项</p>
<p>在根配置文件中添加search块，注意field如果是all表示支持所有，包括page。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lai]# vim _config.yml</span><br><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br></pre></td></tr></table></figure>

<p>其中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">path - 指定生成的索引数据的文件名。默认为 search.xml 。</span><br><span class="line">field - 指定索引数据的生成范围。可选值包括：</span><br><span class="line">   post - 只生成博客文章（post）的索引（默认）；</span><br><span class="line">   page - 只生成其他页面（page）的索引；</span><br><span class="line">   all - 生成所有文章和页面的索引。</span><br></pre></td></tr></table></figure>

<p>3.测试访问</p>
<p>在浏览器中说<a target="_blank" rel="noopener" href="http://10.60.0.85/search.xml%EF%BC%8C%E6%88%91%E8%BF%99%E9%87%8C%E6%98%AF%E5%87%BA%E6%9D%A5%E7%B1%BB%E4%BC%BC%E4%B8%8B%E9%9D%A2%E8%BF%99%E6%A0%B7%E7%9A%84">http://10.60.0.85/search.xml，我这里是出来类似下面这样的</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">该 XML 文件并未包含任何关联的样式信息。文档树显示如下。</span><br><span class="line"></span><br><span class="line">&lt;search&gt;</span><br><span class="line">  &lt;entry&gt;</span><br><span class="line">    &lt;title&gt;php生成8位随机数&lt;/title&gt;</span><br><span class="line">    &lt;url&gt;http://yoursite.com/2016/10/18/php%E7%94%9F%E6%88%908%E4%BD%8D%E9%9A%8F%E6%9C%BA%E6%95%B0/&lt;/url&gt;</span><br><span class="line">    &lt;content type=&quot;html&quot;&gt;</span><br><span class="line">      &lt;p&gt;&amp;lt;?php&lt;/p&gt;</span><br><span class="line">      &lt;h3 id=&quot;1-使用str-shuffle-substr产生8位随机数&quot;&gt;..</span><br><span class="line">  &lt;/entry&gt;</span><br><span class="line">&lt;/search&gt;</span><br></pre></td></tr></table></figure>

<p>4.编辑搜索界面，我使用的next主题默认到这里就有了搜索功能了。</p>
<p>搜索界面由一个输入框（input）和一个用于动态插入搜索结果的 div 组成。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;site_search&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; id=&quot;local-search-input&quot; name=&quot;q&quot; results=&quot;0&quot; placeholder=&quot;search my blog...&quot; class=&quot;form-control&quot;/&gt;</span><br><span class="line">  &lt;div id=&quot;local-search-result&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>5.实现本地搜索函数</p>
<p>接下来编写一个 search.js 脚本，用来实现基于 search.xml 的本地检索函数 searchFunc ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">var searchFunc = function(path, search_id, content_id) &#123;</span><br><span class="line">    &#x27;use strict&#x27;;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url: path,</span><br><span class="line">        dataType: &quot;xml&quot;,</span><br><span class="line">        success: function( xmlResponse ) &#123;</span><br><span class="line">            // get the contents from search data</span><br><span class="line">            var datas = $( &quot;entry&quot;, xmlResponse ).map(function() &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    title: $( &quot;title&quot;, this ).text(),</span><br><span class="line">                    content: $(&quot;content&quot;,this).text(),</span><br><span class="line">                    url: $( &quot;url&quot; , this).text()</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;).get();</span><br><span class="line">            var $input = document.getElementById(search_id);</span><br><span class="line">            var $resultContent = document.getElementById(content_id);</span><br><span class="line">            $input.addEventListener(&#x27;input&#x27;, function()&#123;</span><br><span class="line">                var str=&#x27;&lt;ul class=\&quot;search-result-list\&quot;&gt;&#x27;;                </span><br><span class="line">                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);</span><br><span class="line">                $resultContent.innerHTML = &quot;&quot;;</span><br><span class="line">                if (this.value.trim().length &lt;= 0) &#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                // perform local searching</span><br><span class="line">                datas.forEach(function(data) &#123;</span><br><span class="line">                    var isMatch = true;</span><br><span class="line">                    var content_index = [];</span><br><span class="line">                    var data_title = data.title.trim().toLowerCase();</span><br><span class="line">                    var data_content = data.content.trim().replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;).toLowerCase();</span><br><span class="line">                    var data_url = data.url;</span><br><span class="line">                    var index_title = -1;</span><br><span class="line">                    var index_content = -1;</span><br><span class="line">                    var first_occur = -1;</span><br><span class="line">                    // only match artiles with not empty titles and contents</span><br><span class="line">                    if(data_title != &#x27;&#x27; &amp;&amp; data_content != &#x27;&#x27;) &#123;</span><br><span class="line">                        keywords.forEach(function(keyword, i) &#123;</span><br><span class="line">                            index_title = data_title.indexOf(keyword);</span><br><span class="line">                            index_content = data_content.indexOf(keyword);</span><br><span class="line">                            if( index_title &lt; 0 &amp;&amp; index_content &lt; 0 )&#123;</span><br><span class="line">                                isMatch = false;</span><br><span class="line">                            &#125; else &#123;</span><br><span class="line">                                if (index_content &lt; 0) &#123;</span><br><span class="line">                                    index_content = 0;</span><br><span class="line">                                &#125;</span><br><span class="line">                                if (i == 0) &#123;</span><br><span class="line">                                    first_occur = index_content;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    // show search results</span><br><span class="line">                    if (isMatch) &#123;</span><br><span class="line">                        str += &quot;&lt;li&gt;&lt;a href=&#x27;&quot;+ data_url +&quot;&#x27; class=&#x27;search-result-title&#x27;&gt;&quot;+ data_title +&quot;&lt;/a&gt;&quot;;</span><br><span class="line">                        var content = data.content.trim().replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;);</span><br><span class="line">                        if (first_occur &gt;= 0) &#123;</span><br><span class="line">                            // cut out 100 characters</span><br><span class="line">                            var start = first_occur - 20;</span><br><span class="line">                            var end = first_occur + 80;</span><br><span class="line">                            if(start &lt; 0)&#123;</span><br><span class="line">                                start = 0;</span><br><span class="line">                            &#125;</span><br><span class="line">                            if(start == 0)&#123;</span><br><span class="line">                                end = 100;</span><br><span class="line">                            &#125;</span><br><span class="line">                            if(end &gt; content.length)&#123;</span><br><span class="line">                                end = content.length;</span><br><span class="line">                            &#125;</span><br><span class="line">                            var match_content = content.substr(start, end); </span><br><span class="line">                            // highlight all keywords</span><br><span class="line">                            keywords.forEach(function(keyword)&#123;</span><br><span class="line">                                var regS = new RegExp(keyword, &quot;gi&quot;);</span><br><span class="line">                                match_content = match_content.replace(regS, &quot;&lt;em class=\&quot;search-keyword\&quot;&gt;&quot;+keyword+&quot;&lt;/em&gt;&quot;);</span><br><span class="line">                            &#125;);</span><br><span class="line">                            </span><br><span class="line">                            str += &quot;&lt;p class=\&quot;search-result\&quot;&gt;&quot; + match_content +&quot;...&lt;/p&gt;&quot;</span><br><span class="line">                        &#125;</span><br><span class="line">                        str += &quot;&lt;/li&gt;&quot;;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                str += &quot;&lt;/ul&gt;&quot;;</span><br><span class="line">                $resultContent.innerHTML = str;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>searchFunc 包含三个参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- path - 用 hexo-generator-search 生成的搜索索引文件的路径。注意这个 path 和前面 hexo-generator-search 的 path 选项有所不同。这里的 path 才是指这个文件的路径，而前面的 path 指的是生成的文件名。</span><br><span class="line">- search_id - 搜索框的 id 。对于我们的例子，就是 local-search-input;</span><br><span class="line">- content_id - 结果框的 id 。对于我们的例子，就是 local-search-result。</span><br></pre></td></tr></table></figure>

<p>6.调用搜索函数<br>有了上面的检索函数，接下来可以在适当时机调用它。由于 path 的实际地址是根 _config.yml 里 config.root + config.search.path 两个值组成，所以我们最好将这个调用写在页面模板中，以方便获取站点的设置信息。例如，对于 ejs 模板：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;      </span><br><span class="line">     var search_path = &quot;&lt;%= config.search.path %&gt;&quot;;</span><br><span class="line">     if (search_path.length == 0) &#123;</span><br><span class="line">     	search_path = &quot;search.xml&quot;;</span><br><span class="line">     &#125;</span><br><span class="line">     var path = &quot;&lt;%= config.root %&gt;&quot; + search_path;</span><br><span class="line">     searchFunc(path, &#x27;local-search-input&#x27;, &#x27;local-search-result&#x27;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>至此就完成了本地检索引擎的实线，最后的工作就是修改样式，让检索页面更美观。在 searchFunc 函数中，我已经为几个关键的页面元素设定了 css 名：</p>
<ul>
<li>ul.search-result-list - 搜索结果列表的样式名；</li>
<li>a.search-result-title - 搜索结果文章标题的样式名；</li>
<li>p.search-result - 搜索结果每篇文章的预览段落的样式名；</li>
<li>em.search-keyword - 搜索结果每篇文章的预览段落中匹配关键词的样式名。</li>
</ul>
<p>最后给出 hexo-theme-freemind 主题的相关样式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ul.search-result-list &#123;</span><br><span class="line">  padding-left: 10px;</span><br><span class="line">&#125;</span><br><span class="line">a.search-result-title &#123;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line">p.search-result &#123;</span><br><span class="line">  color=#555;</span><br><span class="line">&#125;</span><br><span class="line">em.search-keyword &#123;</span><br><span class="line">  border-bottom: 1px dashed #4088b8;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h2><p>Hexo常用命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo n == hexo new</span><br><span class="line">hexo g == hexo generate</span><br><span class="line">hexo s == hexo server</span><br><span class="line">hexo d == hexo deploy</span><br></pre></td></tr></table></figure>


    </div>

    <div>全文完。</div>
  </article>
  <div class="toc-container">
    
  <div id="toc" class="toc-article">
    <strong class="toc-title">目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Hexo%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2"><span class="toc-text">Hexo静态博客</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-text">一、环境配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-git%E9%85%8D%E7%BD%AE"><span class="toc-text">1.1.git配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Node-js%E5%AE%89%E8%A3%85"><span class="toc-text">1.2.Node.js安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85Hexo"><span class="toc-text">二、安装Hexo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85Hexo"><span class="toc-text">2.1.安装Hexo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">2.2.创建项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-Hexo%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.3.Hexo的配置介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%9B%BE"><span class="toc-text">2.3.1.项目结构图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE"><span class="toc-text">2.3.2.全局配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE"><span class="toc-text">2.3.3.主题配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-4-%E4%B8%BB%E9%A2%98%E5%AE%89%E8%A3%85"><span class="toc-text">2.3.4.主题安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">三、基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%88%9B%E5%BB%BA%E6%96%B0%E6%96%87%E7%AB%A0"><span class="toc-text">3.1.创建新文章</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E7%BC%96%E8%BE%91%E6%96%B0%E6%96%87%E7%AB%A0"><span class="toc-text">3.2.编辑新文章</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="toc-text">3.3.小技巧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E9%83%A8%E7%BD%B2"><span class="toc-text">3.4.部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E5%8F%A6%E4%B8%80%E7%A7%8D%E9%83%A8%E7%BD%B2%E5%88%B0gighub%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-text">3.5.另一种部署到gighub的配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E8%85%BE%E8%AE%AF%E5%85%AC%E7%9B%8A404%E9%A1%B5%E9%9D%A2"><span class="toc-text">3.6.腾讯公益404页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-yilia%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE"><span class="toc-text">3.7.yilia主题配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-%E6%B7%BB%E5%8A%A0tags%E9%A1%B5%E9%9D%A2"><span class="toc-text">3.8.添加tags页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-9-%E5%85%B3%E4%BA%8E%E6%88%91%E4%BB%AC"><span class="toc-text">3.9.关于我们</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-10-%E5%88%9B%E5%BB%BA%E5%88%86%E7%B1%BB%E9%A1%B5%E9%9D%A2"><span class="toc-text">3.10.创建分类页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-11-%E5%A2%9E%E5%8A%A0%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD"><span class="toc-text">3.11.增加本地搜索功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">四、总结</span></a></li></ol></li></ol>
  </div>


  </div>
</div>
<div class="copyright">
    <span>本作品采用</span>
    <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 国际许可协议</a>
    <span>进行许可。 转载时请注明原文链接。</span>
</div>
<div class="share" style="width: 100%;">
  <img src="/static/qrcode/qrcode_wwwitcsscn_20221008_0909.png" alt="Running Geek" style="margin: auto; display: block;"/>

  <div style="margin: auto; text-align: center; font-size: 0.8em; color: grey;">老铁们关注走一走，不迷路</div>
  
</div>

  
    <div class="post-nav">
      <div class="post-nav-item post-nav-next">
        
          <span>〈 </span>
          <a href="/2016/09/13/mysql%E6%8F%90%E7%A4%BA%E2%80%9Cperformance-schema-session-status%E2%80%9D/" rel="next" title="mysql提示“performance_schema.session_status”">
          mysql提示“performance_schema.session_status”
          </a>
        
      </div>
  
      <div class="post-nav-item post-nav-prev">
          
          <a href="/2016/10/08/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/" rel="prev" title="mysql数据库导入导出">
            mysql数据库导入导出
          </a>
          <span>〉</span>
        
      </div>
    </div>
  


    </div>

    

  </div>
  <footer class="footer text-center">
    <div id="bottom-inner">
        <a class="bottom-item" target="_blank" rel="noopener" href="https://www.itcss.cn">首页</a> |
        <a class="bottom-item" href="https://www.itcss.cn" target="_blank">主站</a> |
        <a class="bottom-item" href="https://github.com/itcss" target="_blank">GitHub</a> |
        <a class="bottom-item" href="https://hexo.io" target="_blank">Powered by hexo</a> |
        <a class="bottom-item" href="https://github.com/KevinOfNeu/hexo-theme-xoxo" target="_blank">Theme xoxo</a>
    </div>
</footer>
  

<script>
  (function(window, document, undefined) {

    var timer = null;

    function returnTop() {
      cancelAnimationFrame(timer);
      timer = requestAnimationFrame(function fn() {
        var oTop = document.body.scrollTop || document.documentElement.scrollTop;
        if (oTop > 0) {
          document.body.scrollTop = document.documentElement.scrollTop = oTop - 50;
          timer = requestAnimationFrame(fn);
        } else {
          cancelAnimationFrame(timer);
        }
      });
    }

    var hearts = [];
    window.requestAnimationFrame = (function() {
      return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback) {
          setTimeout(callback, 1000 / 60);
        }
    })();
    init();

    function init() {
      css(".heart{z-index:9999;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}");
      attachEvent();
      gameloop();
      addMenuEvent();
    }

    function gameloop() {
      for (var i = 0; i < hearts.length; i++) {
        if (hearts[i].alpha <= 0) {
          document.body.removeChild(hearts[i].el);
          hearts.splice(i, 1);
          continue;
        }
        hearts[i].y--;
        hearts[i].scale += 0.004;
        hearts[i].alpha -= 0.013;
        hearts[i].el.style.cssText = "left:" + hearts[i].x + "px;top:" + hearts[i].y + "px;opacity:" + hearts[i].alpha + ";transform:scale(" + hearts[i].scale + "," + hearts[i].scale + ") rotate(45deg);background:" + hearts[i].color;
      }
      requestAnimationFrame(gameloop);
    }

    /**
     * 给logo设置点击事件
     * 
     * - 回到顶部
     * - 出现爱心
     */
    function attachEvent() {
      var old = typeof window.onclick === "function" && window.onclick;
      var logo = document.getElementById("logo");
      if (logo) {
        logo.onclick = function(event) {
          returnTop();
          old && old();
          createHeart(event);
        }
      }
      
    }

    function createHeart(event) {
      var d = document.createElement("div");
      d.className = "heart";
      hearts.push({
        el: d,
        x: event.clientX - 5,
        y: event.clientY - 5,
        scale: 1,
        alpha: 1,
        color: randomColor()
      });
      document.body.appendChild(d);
    }

    function css(css) {
      var style = document.createElement("style");
      style.type = "text/css";
      try {
        style.appendChild(document.createTextNode(css));
      } catch (ex) {
        style.styleSheet.cssText = css;
      }
      document.getElementsByTagName('head')[0].appendChild(style);
    }

    function randomColor() {
      // return "rgb(" + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + ")";
      return "#F44336";
    }

    function addMenuEvent() {
      var menu = document.getElementById('menu-main-post');
      if (menu) {
        var toc = document.getElementById('toc');
        if (toc) {
          menu.onclick = function() {
            if (toc) {
              if (toc.style.display == 'block') {
                toc.style.display = 'none';
              } else {
                toc.style.display = 'block';
              }
            }
          };
        } else {
          menu.style.display = 'none';
        }
      }
    }

  })(window, document);
</script>

  



</body>
</html>
